# Как проверить работает ли Telegram бот

## 1. Проверка логов при запуске

Запусти бота и смотри на вывод в консоль:

\`\`\`bash
cd backend
npm run bot
\`\`\`

Должны видеть:
\`\`\`
[BOT] MongoDB connected
[BOT] Telegram bot started
[BOT] Bot is ready to send reminders
[BOT] Running daily reminder check...
\`\`\`

## 2. Проверка ручно через Telegram

1. Найди своего бота в Telegram (поиск по имени)
2. Напиши `/start` - должен ответить приветствием
3. Напиши `/status` - проверит зарегистрирован ли ты
4. Напиши `/events` - покажет твои события
5. Напиши `/help` - покажет все команды

В консоли должны видеть логи типа:
\`\`\`
[BOT] Message received from @your_username: /start
[BOT] /start command from @your_username
\`\`\`

## 3. Проверка отправки напоминаний

Чтобы тестировать напоминания БЕЗ ожидания 9:00 утра:

### Вариант А: Запусти проверку вручную

Добавь этот код в конце bot.js для теста:

\`\`\`javascript
// Для тестирования - запусти проверку через 5 секунд
setTimeout(() => {
  console.log('[BOT TEST] Running manual reminder check...');
  checkAndSendReminders();
}, 5000);
\`\`\`

Тогда при старте бота, через 5 секунд запустится проверка.

### Вариант Б: Измени время крона в bot.js

Измени эту строку (запустится в 09:30 вместо 09:00):
\`\`\`javascript
cron.schedule('30 9 * * *', () => {
\`\`\`

## 4. Как создать тестовое событие на завтра

1. Зайди в приложение SLEO (http://localhost:3000)
2. Перейди на вкладку "События"
3. Нажми "Добавить событие"
4. Заполни:
   - Название: "Тестовое событие"
   - Дата: Завтрашнюю дату (в формате YYYY-MM-DD)
   - Описание: "Это тестовое событие"
   - Место: "Учебное помещение"
5. Добавь себя (своего волонтера) к событию
6. Сохрани

Если всё правильно, завтра в 09:00 получишь уведомление от бота!

## 5. Проверка конфигурации

Убедись, что в backend/.env установлены:

\`\`\`env
TELEGRAM_BOT_TOKEN=твой_токен_от_@BotFather
MONGODB_URI=mongodb://localhost:27017/sleo
\`\`\`

Если TELEGRAM_BOT_TOKEN не установлен, бот не запустится.

## 6. Возможные проблемы

### Проблема: Бот не отвечает на команды
- Проверь что бот работает (есть логи в консоли)
- Убедись что у тебя есть @username в Telegram (Настройки > Имя пользователя)
- Перезагрузи бота

### Проблема: /status показывает "не зарегистрирован"
- В приложении создай волонтера с твоим Telegram username (без @)
- Убедись что имя совпадает ровно с твоим юзернеймом в Телеграме

### Проблема: Напоминания не приходят
- Проверь что у события дата на завтра в формате YYYY-MM-DD
- Убедись что ты добавлен в список волонтеров этого события
- Посмотри логи в консоли - должны быть записи о отправке сообщений

## 7. Логирование

Все действия логируются в консоль с префиксом [BOT]. 

Например:
\`\`\`
[BOT] Message received from @username: /start
[BOT] /status - Volunteer found: John Doe
[BOT] Reminder sent to @username for event "Cleanup Day"
\`\`\`

Если видишь ошибки, скопируй их и проверь в логах MongoDB.
